<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>ts-typed-events</title>
	<meta name="description" content="Documentation for ts-typed-events">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">ts-typed-events</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>ts-typed-events</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#ts-typed-events" id="ts-typed-events" style="color: inherit; text-decoration: none;">
					<h1>ts-typed-events</h1>
				</a>
				<p>Strongly typed event emitters for <a href="https://www.typescriptlang.org/">TypeScript</a>.</p>
				<p>This is a TypeScript project, although the built code is available in the
					package without any runtime dependencies, it is solely designed around the
					purpose of making events easier to work with <em>in TypeScript</em> via the included
				definitions.</p>
				<a href="#purpose" id="purpose" style="color: inherit; text-decoration: none;">
					<h2>Purpose</h2>
				</a>
				<p>Using Node&#39;s <a href="https://nodejs.org/api/events.html">EventEmitter</a> class is nice;
					it&#39;s a useful software engineering paradigm. However in TypeScript you lose out
				on TypeScript&#39;s robust type checking when publishing and subscribing to events.</p>
				<p>The aim of this is to leverage TypeScript&#39;s generic types to allow for compile-
					time type checking. We also move the events into their own class, so you don&#39;t
					have to inherit or mixin any of our classes, just use these single Event
					emitters. It is also un-opinionated, exposing functional and object oriented
				build blocks in this library so you can use it best works in your project.</p>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h2>Examples</h2>
				</a>
				<a href="#importing" id="importing" style="color: inherit; text-decoration: none;">
					<h3>Importing</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">createEventEmitter</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;ts-typed-events&quot;</span><span style="color: #000000">;</span>
</code></pre>
				<a href="#simple-usage" id="simple-usage" style="color: inherit; text-decoration: none;">
					<h3>Simple usage</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">event</span><span style="color: #000000">, </span><span style="color: #0070C1">emit</span><span style="color: #000000"> } = </span><span style="color: #795E26">createEventEmitter</span><span style="color: #000000">();</span>

<span style="color: #001080">signal</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;The event triggered!&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">});</span>

<span style="color: #795E26">emit</span><span style="color: #000000">(); </span><span style="color: #008000">// prints: `The event triggered!`</span>
</code></pre>
				<a href="#strongly-typed-events" id="strongly-typed-events" style="color: inherit; text-decoration: none;">
					<h3>Strongly typed events</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">event</span><span style="color: #000000">, </span><span style="color: #0070C1">emit</span><span style="color: #000000"> } = </span><span style="color: #795E26">createEventEmitter</span><span style="color: #000000">&lt;</span><span style="color: #267F99">string</span><span style="color: #000000">&gt;();</span>

<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">((</span><span style="color: #001080">str</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hey we got the string:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">str</span><span style="color: #000000">);</span>
<span style="color: #000000">});</span>

<span style="color: #795E26">emit</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;some string&quot;</span><span style="color: #000000">); </span><span style="color: #008000">// prints `hey we got the string: some string`</span>
</code></pre>
				<a href="#asyncawait-usage" id="asyncawait-usage" style="color: inherit; text-decoration: none;">
					<h3>async/await usage</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">event</span><span style="color: #000000">, </span><span style="color: #0070C1">emit</span><span style="color: #000000"> } = </span><span style="color: #795E26">createEventEmitter</span><span style="color: #000000">&lt;</span><span style="color: #267F99">number</span><span style="color: #000000">&gt;();</span>

<span style="color: #008000">// emit the event in 1 second</span>
<span style="color: #795E26">setTimeout</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">emit</span><span style="color: #000000">(</span><span style="color: #098658">1337</span><span style="color: #000000">), </span><span style="color: #098658">1000</span><span style="color: #000000">);</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">emitted</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">once</span><span style="color: #000000">();</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;1 sec later we got&quot;</span><span style="color: #000000">, </span><span style="color: #001080">emitted</span><span style="color: #000000">);</span>
<span style="color: #008000">// printed: `1 sec later we got 1337`</span>
</code></pre>
				<p><em>Note</em>: async only works with <code>once</code>, not <code>on</code> as that can trigger multiple
				times.</p>
				<a href="#multiple-callbacks" id="multiple-callbacks" style="color: inherit; text-decoration: none;">
					<h3>Multiple callbacks</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">event</span><span style="color: #000000">, </span><span style="color: #0070C1">emit</span><span style="color: #000000"> } = </span><span style="color: #795E26">createEventEmitter</span><span style="color: #000000">&lt;</span><span style="color: #A31515">&quot;pizza&quot;</span><span style="color: #000000"> | </span><span style="color: #A31515">&quot;ice cream&quot;</span><span style="color: #000000">&gt;();</span>

<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">((</span><span style="color: #001080">food</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;I like&quot;</span><span style="color: #000000">, </span><span style="color: #001080">food</span><span style="color: #000000">));</span>
<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">((</span><span style="color: #001080">badFood</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">badFood</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;is bad for me!&quot;</span><span style="color: #000000">));</span>

<span style="color: #795E26">emit</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;pizza&quot;</span><span style="color: #000000">);</span>
<span style="color: #008000">// printed: `I like pizza` followed by `pizza is bad for me!`</span>
</code></pre>
				<a href="#removing-callbacks" id="removing-callbacks" style="color: inherit; text-decoration: none;">
					<h3>Removing callbacks</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">event</span><span style="color: #000000">, </span><span style="color: #0070C1">emit</span><span style="color: #000000"> } = </span><span style="color: #795E26">createEventEmitter</span><span style="color: #000000">();</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">callback</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> { </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;I don&#039;t want to be called&quot;</span><span style="color: #000000">); };</span>
<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #001080">callback</span><span style="color: #000000">);</span>
<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">off</span><span style="color: #000000">(</span><span style="color: #001080">callback</span><span style="color: #000000">);</span>

<span style="color: #008000">// The callback was removed, so the Error in the callback is not thrown</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">emitted</span><span style="color: #000000"> = </span><span style="color: #795E26">emit</span><span style="color: #000000">();</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;were any callbacks invoked during the emit?&quot;</span><span style="color: #000000">, </span><span style="color: #001080">emitted</span><span style="color: #000000">);</span>
<span style="color: #008000">// printed: `were any callbacks invoked during the emit? false`</span>
</code></pre>
				<a href="#alternative-syntax" id="alternative-syntax" style="color: inherit; text-decoration: none;">
					<h3>Alternative Syntax</h3>
				</a>
				<p>The main method, <code>createEventEmitter</code>, returns the emitter function, with
					the event and itself as properties. This makes the above examples when used
					with destructuring look clean. However you can choose not to destructure it
				as well:</p>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">emit</span><span style="color: #000000"> = </span><span style="color: #795E26">createEventEmitter</span><span style="color: #000000">&lt;</span><span style="color: #A31515">&quot;something&quot;</span><span style="color: #000000"> | </span><span style="color: #267F99">undefined</span><span style="color: #000000">&gt;();</span>

<span style="color: #001080">emit</span><span style="color: #000000">.</span><span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">((</span><span style="color: #001080">something</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;did we get something?:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">something</span><span style="color: #000000">);</span>
<span style="color: #000000">});</span>

<span style="color: #795E26">emit</span><span style="color: #000000">(); </span><span style="color: #008000">// prints `did we get something?: undefined`</span>

<span style="color: #008000">// the emitter has access to itself via the `emit` key as well</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">emit</span><span style="color: #000000"> === </span><span style="color: #001080">emit</span><span style="color: #000000">.</span><span style="color: #001080">emit</span><span style="color: #000000">); </span><span style="color: #008000">// print `true`</span>
</code></pre>
				<a href="#public-events" id="public-events" style="color: inherit; text-decoration: none;">
					<h3>Public Events</h3>
				</a>
				<p>In the above examples, the <code>event</code> and <code>emit</code> are two separate constructs.
					This is to separate the callback and invocation logic. However there are some
					times when you could want an event to be able to be triggered by anything with
				access to it.</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">PublicEvent</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;ts-typed-events&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">publicEvent</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">PublicEvent</span><span style="color: #000000">();</span>

<span style="color: #001080">publicEvent</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;someone triggered this!&quot;</span><span style="color: #000000">));</span>

<span style="color: #001080">publicEvent</span><span style="color: #000000">.</span><span style="color: #795E26">emit</span><span style="color: #000000">(); </span><span style="color: #008000">// prints: `someone triggered this!`</span>
</code></pre>
				<p>You can also use it functionally if you want to avoid classes/OOP.</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">createPublicEventEmitter</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;ts-typed-events&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">event</span><span style="color: #000000">, </span><span style="color: #0070C1">emit</span><span style="color: #000000"> } = </span><span style="color: #795E26">createPublicEventEmitter</span><span style="color: #000000">&lt;</span><span style="color: #267F99">string</span><span style="color: #000000">&gt;();</span>

<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">((</span><span style="color: #001080">emitted</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`someone emitted: &#039;</span><span style="color: #0000FF">${</span><span style="color: #001080">emitted</span><span style="color: #0000FF">}</span><span style="color: #A31515">&#039;!`</span><span style="color: #000000">));</span>

<span style="color: #001080">event</span><span style="color: #000000">.</span><span style="color: #795E26">emit</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;first&quot;</span><span style="color: #000000">); </span><span style="color: #008000">// prints: `someone emitted &#039;first&#039;!`</span>

<span style="color: #008000">// you still can use the &quot;normal&quot; emitter too</span>
<span style="color: #795E26">emit</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;second&quot;</span><span style="color: #000000">); </span><span style="color: #008000">// prints: `someone emitted &#039;second&#039;!`</span>
</code></pre>
				<a href="#classes" id="classes" style="color: inherit; text-decoration: none;">
					<h3>Classes</h3>
				</a>
				<pre><code class="language-ts"><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Dog</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #001080">timesBarked</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span>
<span style="color: #000000">    </span><span style="color: #008000">// By keeping reference to the tuple, we have wrapped the emit function</span>
<span style="color: #000000">    </span><span style="color: #008000">// in a private variable, and only exposed the public event.</span>
<span style="color: #000000">    </span><span style="color: #008000">// This allows us to decide inside our class instances when we want to</span>
<span style="color: #000000">    </span><span style="color: #008000">// emit events.</span>
<span style="color: #000000">    </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #001080">emitBarked</span><span style="color: #000000"> = </span><span style="color: #795E26">createEventEmit</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">barked</span><span style="color: #000000"> = </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">emitBarked</span><span style="color: #000000">.</span><span style="color: #001080">event</span><span style="color: #000000">;</span>

<span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">bark</span><span style="color: #000000">() {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">timesBarked</span><span style="color: #000000"> += </span><span style="color: #098658">1</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">emitBarked</span><span style="color: #000000">();</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">dog</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Dog</span><span style="color: #000000">();</span>
<span style="color: #001080">dog</span><span style="color: #000000">.</span><span style="color: #001080">barked</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;The dog barked!&quot;</span><span style="color: #000000">));</span>
<span style="color: #001080">dog</span><span style="color: #000000">.</span><span style="color: #795E26">bark</span><span style="color: #000000">(); </span><span style="color: #008000">// prints: `The dog barked!`;</span>
</code></pre>
				<a href="#other-notes" id="other-notes" style="color: inherit; text-decoration: none;">
					<h2>Other Notes</h2>
				</a>
				<p>This library leverages TypeScript&#39;s interfaces and generics very heavily to do
					type checking at every point. If you plan to use this with regular JavaScript
					most of this library&#39;s features are lost to you, so you&#39;d probably be best off
				sticking to the built-in EventEmitter class.</p>
				<a href="#docs" id="docs" style="color: inherit; text-decoration: none;">
					<h2>Docs</h2>
				</a>
				<p>All the functions are documented using jsdoc style comments, so your
				favorite IDE should pick up the documentation cleanly.</p>
				<p>However, if you prefer external docs, they are available online here:
				<a href="https://jacobfischer.github.io/ts-typed-events/">https://jacobfischer.github.io/ts-typed-events/</a></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Modules</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/src.html">src</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>